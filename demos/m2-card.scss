//
// Copyright 2017 Google Inc. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//

//
// Imports
//

@import "../packages/mdc-theme/color-palette";

$mdc-theme-secondary: #4285F4; // Google Blue 500

@import "./common";
@import "../packages/mdc-elevation/mdc-elevation";
@import "../packages/mdc-ripple/mdc-ripple";
@import "../packages/mdc-theme/mdc-theme";
@import "../packages/mdc-typography/mdc-typography";

//
// Variables
//

$m2-card-hairline-border-color-resting: #ddd;
$m2-card-baseline-background-color: #fff;
$m2-card-baseline-drop-zone-thickness: 4px;

//
// Mixins
//

@mixin m2-card-corner-radius($radius) {
  border-radius: $radius;
}

//
// Classes
//

.m2-card-group {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;

  &--dragging {
    // TODO(acdvorak): Find a better way to ignore mouse events on elements underneath the mirror.
    pointer-events: none;
  }
}

.m2-card:not(.m2-card--drag-mirror) {
  transition: transform .2s;
}

.m2-card {
  @include mdc-elevation(4);
  @include m2-card-corner-radius(4px);
  @include mdc-ripple-color(black, .14);
  @include mdc-typography(display2);

  background-color: $m2-card-baseline-background-color;

  display: flex;
  align-content: center;
  align-items: center;
  justify-content: center;
  justify-items: center;

  cursor: pointer;

  &:hover {
    background-color: rgba(black, .04);
  }

  &:focus {
    background-color: rgba(black, .06);
  }
}

.m2-card--hairline {
  @include mdc-elevation(1);

  border: 1px solid $m2-card-hairline-border-color-resting;
}

.m2-card--drag-source {
  visibility: hidden;
}

.m2-card-drop-spacer {
  flex-grow: 0;
  flex-shrink: 1;

  // TODO(acdvorak): Figure out why this hack is needed to force the element to consume width
  //border: 1px solid transparent;

  // TODO(acdvorak): Document that `width` is set dynamically in JS
}

.m2-card-drop-zone {
  background-color: #333;
  border-radius: 4px;
  width: $m2-card-baseline-drop-zone-thickness;
}

//
// Demo
//

$demo-card-size: 150px;
$demo-card-margin: 8px;
$demo-card-cols: 3;
$demo-drop-zone-thickness: 6px;

.hero {
  position: relative;
  flex-direction: row;
  flex-wrap: wrap;
  height: unset;
  padding: 48px;
}

.demo-card-group {
  // TODO(acdvorak): Document the need for extra width to accommodate the drop zone
  // TODO(acdvorak): Add test cases for all width variations
  max-width: (($demo-card-size + ($demo-card-margin * 2)) * $demo-card-cols) + $demo-drop-zone-thickness;
  margin: 32px;
}

.demo-card-group .m2-card-drop-zone {
  width: $demo-drop-zone-thickness;
}

.demo-card {
  margin: $demo-card-margin;
}
.demo-card-group .m2-card-drop-zone {
  margin: $demo-card-margin 0;
}

.demo-card {
  position: relative;
  width: $demo-card-size;
  height: $demo-card-size;
}

.demo-card--color {
  $color-value: mdc-theme-prop-value(secondary);

  @include mdc-ripple-color(white, .14);

  background-color: $color-value;
  color: white;

  &:hover {
    background-color: mdc-theme-light-variant($color-value, 1);
  }

  &:focus {
    background-color: mdc-theme-light-variant($color-value, 1.2);
  }
}
